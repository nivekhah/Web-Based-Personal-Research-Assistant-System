<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>用户注册</title>
    <link rel="stylesheet" href="../static/bootstrap.min.css">
    <script src="../static/jquery-3.2.1.slim.min.js"></script>
    <script src="../static/bootstrap.min.js"></script>
</head>

<body>
<script src="../static/jquery-1.4.2.min.js"></script>
<div id="main_div">
    <div style="height: 10%"></div>
	<div style="height: 80%">
        <div class="col-xs-2" style="height:100%; ">
		</div>
        <div class="col-xs-8" style="height:540px; border: 1px #b3b8c2 solid">
            <div style="text-align: center; height: 30%;border-bottom: 1px solid #eee;">
                <div style="height: 10%"></div>
                <img style="height: 50%" src="../static/logo.png">
                <p style="font-size: 2.5em; height: 50%; color: #0099cc;font-weight: bold">个人科研系统</p>
            </div>
            <div style="height: 20px"></div>
            <div style="height: 5%">
                <div class="col-xs-3" style="height:100%;"></div>
                <div class="col-xs-6" style="height:100%;">
                    <p style="font-size: 1.5em">用户注册</p>
                </div>
                <div class="col-xs-3" style="height:100%;"></div>
            </div>
            <div style="height: 3%"></div>
            <div style="height: 400px">
                <div class="col-xs-3" style="height:100%;">
			    <div style="height:11%">
				    <span style="float:right;line-height:35px;">账号</span>
				    <span style="float:right;line-height:35px;color: red;font-size:25px">*</span>
			    </div>
			    <div style="height:11%;">
			    	<span style="float:right;line-height:35px;">真实姓名</span>
				    <span style="float:right;line-height:35px;color: red;font-size:25px">*</span>
			    </div>
			    <!--<div style="height:11%;">
				    <span style="float:right;line-height:35px;">身份证号</span>
				    <span style="float:right;line-height:35px;color: red;font-size:25px">*</span>
			    </div>-->
			    <div style="height:11%;">
				    <span style="float:right;line-height:35px;">手机号码</span>
				    <span style="float:right;line-height:35px;color: red;font-size:25px">*</span>
			    </div>
			    <!--<div style="height:11%;">
				    <span style="float:right;line-height:35px;">单位</span>
			    </div>-->
			    <div style="height:11%;">
				    <span style="float:right;line-height:35px;">密码</span>
				    <span style="float:right;line-height:35px;color: red;font-size:25px">*</span>
			    </div>
			    <div style="height:11%;">
				    <span style="float:right;line-height:35px;">确认密码</span>
				    <span style="float:right;line-height:35px;color: red;font-size:25px">*</span>
			    </div>
		    </div>
            <div class="col-xs-6" style="height:100%;">
			    <div style="height:11%;width:100%">
				    <input id="email" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="text" value="" placeholder="请输入邮箱地址" />
			    </div>
			    <div style="height:11%;width:100%">
				    <input id="name" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="text" value="" />
			    </div>
			    <!--<div style="height:11%;width:100%">
				    <input id="idcard" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="text" value="" />
			    </div>-->
			    <div style="height:11%;width:100%">
				    <input id="phonenumber" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="text" value="" />
			    </div>
			    <!--<div style="height:11%;width:100%">
				    <input id="unit" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="text" value="" />
			    </div>-->
			    <div style="height:11%;width:100%">
				    <input id="password" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="password" value="" />
			    </div>
			    <div style="height:11%;width:100%">
				    <input id="repassword" style="height:90%;width: 100%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);" type="password" value="" />
			    </div>
                <div style="height: 5%"></div>
			    <div style="height:11%;width:100%" align="center">
				    <input id="Button" type="button" value="注册" style="background-color: #0099cc; height:100%;width:40%;border: 0;border-radius: 3px;box-shadow: 0 1px 4px 0 rgba(12, 12, 13, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.15);"  align="center" onclick="Submit()" />
			    </div>
		    </div>
            <div class="col-xs-3" style="height:100%;">
		    </div>
            </div>
		</div>
        <div class="col-xs-2" style="height:100%; ">
		</div>
	</div>
</div>


<!--<div id="main_div">
	<div style="height:5%">
        <div class="col-lg-12" style="height:100%;">
        </div>
	</div>
	<div style="height:60%">

	</div>
</div>-->
<script type="text/javascript">
    $(document).ready(function(){
        function setHeight(){
            var windowHeight = document.documentElement.clientHeight;
            var windowWidth = document.documentElement.clientWidth;
            $('#main_div').css('height',windowHeight + "px");
            $('#main_div').css('width',windowWidth+ "px");
        }
        setHeight();
        $(window).resize(function() {
            setHeight();
        });
	});
	//将注册信息提交给后台
	function Submit()
	{
		//首先检测是否按照要求填写正确
		if(Check())
		{
			//获取用户所填写的信息
			var email=document.getElementById("email").value;
			var name=document.getElementById("name").value;
			//var idcard=document.getElementById("idcard").value;
			var phonenumber=document.getElementById("phonenumber").value;
			var password=document.getElementById("password").value;
			//var unit=document.getElementById("unit").value;
			$SCRIPT_ROOT={{request.script_root|tojson|safe}}
        	$.getJSON($SCRIPT_ROOT+'/registerinfo', {
          		email: email,
            	name: name,
            	//idcard: idcard,
            	phonenumber: phonenumber,
            	password: password,
            	//unit: unit
        	}, function (data) {
        	    if(data=='0'){
        	        window.location.href='login';
                }
                if(data=='1'){
        	        alert('用户名已经存在,请重新输入');
        	        document.getElementById("email").value="";
                }
            });
        	//注册成功，跳转到登录页面
		}
		
	}

	//检查注册必填信息是否填写或者密码与确认密码是否填写正确，除了单位外其余信息都是必填选项
	function Check()  
    {    
        if ( document.getElementById("email").value=="")   
        {  
            alert('请输入邮箱地址!');   
            return false;  
        }  
        else if ( document.getElementById("name").value=="")   
        {  
            alert('请输入真实姓名!');   
            return false;  
        }  
        /* else if ( document.getElementById("idcard").value=="")
        {  
            alert('请输入身份证号!');   
            return false;  
        }  */
        else if ( document.getElementById("phonenumber").value=="")   
        {  
            alert('请输入手机号码!');   
            return false;  
        }  
        else if ( document.getElementById("password").value=="")   
        {  
            alert('请输入密码!');   
            return false;  
        }  
        else if ( document.getElementById("repassword").value=="")   
        {  
            alert('请输入确认密码!');   
            return false;  
        }
        else if(document.getElementById("password").value != document.getElementById("repassword").value)
        {
        	alert('请重新输入密码');
        	//将密码和确认密码清空，以便重新输入
        	document.getElementById("password").value="";
        	document.getElementById("repassword").value="";
        	return false;
        }
         return true;  
    }
    //回车绑定
   document.onkeydown=function(e){
       var a=e||window.event;//加这个火狐下不会报 event is  undefind
       if (a.keyCode == 13){
           document.getElementById("Button").click();
           return false;
       }
   }
</script>
</body>

</html>
